<!doctype html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>: Phantom : Register page</title>

    
    <!--[ Template main css file ]-->
    <link rel="stylesheet" href="/assets/css/style.min.css">

    {{inject_head}}
</head>

<body data-bvite="theme-CeruleanBlue" class="layout-border svgstroke-a layout-default auth">

    <!-- start: main grid layout -->
    <main class="container-fluid px-0">

        <!-- start: project logo -->
        <div class="px-xl-5 px-4 auth-header" data-bs-theme="none">
            <a href="/" class="brand-icon text-decoration-none d-flex align-items-center"
                title="Phantom Login">
                <img src="/assets/imgs/logo.png" alt="Phantom Logo" class="brand-icon" width="35px">
                <span class="fw-bold ps-2 fs-5 text-gradient">Phantom</span>
            </a>
        </div>

        <!-- start: page menu link -->
        <aside class="px-xl-5 px-4 auth-aside" data-bs-theme="none">
            <img class="login-img" src="/assets/imgs/banner.png" alt="">
        </aside>

        <!-- start: page body area -->
        <div class="px-xl-5 px-4 auth-body">
            <form class="row g-3" onsubmit="register(); return false;">
                <ul class="row g-3 list-unstyled li_animate">
                    <li class="col-12">
                        <h1 class="h2 title-font">Welcome to Phantom</h1>
                        <p>
                            Your Malware Production Software
                        </p>
                    </li>
                    <li class="col-12">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control form-control-lg" id="email" placeholder="alice@alice-snow.ru">
                    </li>
                    <li class="col-12">
                        <div class="form-label">
                            <span class="d-flex justify-content-between align-items-center">
                                Password
                            </span>
                        </div>
                        <input type="password" class="form-control form-control-lg" placeholder="**********" id="password">
                    </li>
                    <li class="col-12">
                        <div class="form-label">
                            <span class="d-flex justify-content-between align-items-center">
                                Repeat Password
                            </span>
                        </div>
                        <input type="password" class="form-control form-control-lg" placeholder="**********" id="password2">
                    </li>
                    <li class="col-12 my-lg-4">
                        <a class="btn btn-lg w-100 btn-primary text-uppercase mb-2" onclick="register();"
                            title="sign in">SIGN UP</a>
                    </li>
                    <li class="col-12">
                        <span class="text-muted d-flex d-sm-inline-flex">Already have Phantom account ? <a class="ms-2" href="/auth/login"
                                title="">Sign in here</a></span>
                    </li>
                </ul>
                <!--[ ul.row end ]-->
            </form>
        </div>

        <!-- start: page footer -->
        <footer class="px-xl-5 px-4">
            <p class="mb-0 text-muted">Â© 2024 <a href="https://www.alice-snow.ru/" target="_blank"
                    title="Sn0wAlice">Sn0wAlice</a>, All Rights Reserved.</p>
        </footer>

    </main>

    <script>
        async function register() {
            let email = document.getElementById('email').value;
            let password = document.getElementById('password').value;
            let password2 = document.getElementById('password2').value;

            if (password != password2) {
                alert('Passwords do not match');
                return;
            }

            const req = await fetch("/api/auth/register", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email: email,
                    password: password
                })
            })

            const res = await req.json();

            if (res.status == 'success') {
                window.location.href = '/auth/login';
            } else {
                alert(res.message);
            }
        }
    </script>
</body>

</html>